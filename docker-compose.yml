version: '3'
services:
  mongo:
    image: mongo
    container_name: mongo
    ports:
      - '27017:27017'
    volumes:
      - 'mongo:/data/db'

  rabbit:
    image: rabbitmq:3-management
    ports:
      - 5672:5672
      - 15672:15672
    
      
  server:
    image: 'alphawolfsforce/jaws-schema-api:latest'
      environment:
        PORT: "3000"
        MONGO_SCHEMA_COLLECTION_NAME: "schema"
        MONGO_URI: "mongodb://Alpha:Alpha123456@51.124.152.60:27017"
        MONGO_PROPERTY_COLLECTION_NAME: "property"
        RABBIT_URI: "amqp://rabbit"
        QUEUE_NAME: "schema-instances-queue"
    ports:
      - '3000:3000'
    depends_on:
      - mongo
volumes: 
  mongo: